(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[2617],{39850:function(e,n,i){"use strict";i.d(n,{f:function(){return m}});var t=i(87097),o=(i(34885),i(91643)),r=i(56648),l=i(98369),a=i(41566),s=i(69126),c=i(61585),d=i(69100),u=i(88349),m=function(){var e=(0,r.ES)(),n=e.user,i=e.loading,m=(0,a.Z)().t,p=(0,c.xu)().flags;(0,s.l)();var h=[{label:m("common:account"),link:{href:"/account"}},{label:m("common:security"),link:{href:"/account/security"}}].concat((0,t.Z)(null!==p&&void 0!==p&&p.enableTeams?[{label:(0,u.jsxs)("div",{style:{display:"flex",alignItems:"center"},children:[m("common:teams"),(0,u.jsx)(d.v,{})]}),link:{href:"/account/teams"}}]:[]),[{label:m("common:menu_plans"),link:{href:"/account/plans"}},{label:m("common:billing"),link:{href:"/account/billing"}}]);return i||n?(0,u.jsx)(l.m,{title:m("common:menu_account_settings"),nav:(0,u.jsx)(o.J,{items:h})}):null}},91643:function(e,n,i){"use strict";i.d(n,{J:function(){return u}});i(34885);var t=i(92255),o=i(53746),r=i(77005),l=i(27697),a=i(11391),s=i(88349),c=t.ZP.a.withConfig({displayName:"Nav__NavButton",componentId:"sc-1t9r100-0"})(["border-bottom:",";height:100%;font-weight:",";opacity:",";padding:",";margin:0 32px 0 0;flex:0 1 auto;display:flex;align-items:center;justify-content:center;flex-shrink:1;text-decoration:none;cursor:pointer;&:hover{opacity:1;text-decoration:none;}"],(function(e){return e.$isActive?"2px solid ".concat(l.rS.colors.black):"none"}),l.rS.fontWeights.semi,(function(e){return e.$isActive?1:.5}),(function(e){return e.$isActive?"10px 0px 8px 0px":"10px 0px"})),d=t.ZP.div.withConfig({displayName:"Nav__Div",componentId:"sc-1t9r100-1"})(["display:flex;"]),u=function(e){var n=e.items,i=e.style,t=(0,o.useRouter)().pathname;return(0,s.jsx)(d,{style:i,children:n.map((function(e,n){return e.onClick?(0,s.jsx)(c,{onClick:e.onClick,$isActive:!1,children:e.label},n):e.link?(0,s.jsx)(r.default,{href:e.link.href,passHref:!0,children:(0,s.jsx)(c,{$isActive:(0,a.t9)(t).includes((0,a.t9)(e.link.href)),children:e.label},n)},n):null}))})}},98369:function(e,n,i){"use strict";i.d(n,{m:function(){return x}});var t=i(92255),o=i(37100),r=i(34885),l=i(77005),a=i(41566),s=i(27697),c=i(88349),d=t.ZP.ul.withConfig({displayName:"Breadcrumbs__WrapperUl",componentId:"sc-10ixenr-0"})(["align-self:end;li{line-height:1em;margin:0;display:inline-block;color:",";&:not(:first-child){text-indent:4px;}&:after{content:' / ';}}a{text-decoration:none;color:",";&:hover,&.focus-visible{text-decoration:underline;}}"],s.rS.colors.dark,s.rS.colors.dark),u=function(e){var n=e.children,i=e.className,t=(0,a.Z)().t;return(0,c.jsxs)(d,{className:i,children:[(0,c.jsx)("li",{children:(0,c.jsx)(l.default,{href:"/",children:(0,c.jsx)("a",{children:t("common:home")})})}),r.Children.map(n,(function(e){return e?(0,c.jsx)("li",{children:e}):null}))]})},m=i(53746),p=i(26847),h=i(85181);var x=(0,r.memo)((function(e){var n,i=e.hero,t=e.title,o=e.cta,r=e.artistLink,s=e.description,d=e.nav,u=e.collectionId,x=e.collectionSlug,P=e.collectionName,I=e.withBreadcrumbs,N=e.headerImage,k=e.style,S=(0,m.useRouter)(),Z=(0,p.t7)(),B=(0,a.Z)().t,z=(n=S.route).startsWith("/team/")?"teams":n.startsWith("/collections")?"collections":null;return(0,c.jsxs)(b,{style:k,children:[(0,c.jsxs)(g,{children:[I&&(0,c.jsxs)(_,{children:["collections"===z&&(0,c.jsx)(l.default,{href:"/collections",children:(0,c.jsx)("a",{children:B("common:collections")})}),"teams"===z&&Z&&(0,c.jsx)(l.default,{href:"/team/".concat(Z.uid),children:(0,c.jsx)("a",{children:Z.name})}),Boolean(u)&&(0,c.jsx)(l.default,{href:"/collections/".concat(u).concat(x?"/".concat(x):""),children:(0,c.jsx)("a",{children:P})})]}),(0,c.jsxs)(v,{children:["string"===typeof t?(0,c.jsx)("h1",{style:{margin:0},children:t}):t,i&&(0,c.jsx)(h.VM,{style:{margin:0},children:i}),r&&(0,c.jsx)(C,{children:r})]}),(0,c.jsx)(y,{children:o}),s&&(0,c.jsx)(j,{children:s})]}),N&&(0,c.jsx)(f,{children:N}),d&&(0,c.jsx)(w,{children:d})]})}));x.displayName="PageHeader";var g=t.ZP.div.withConfig({displayName:"PageHeader__HeaderGrid",componentId:"sc-1e4osxu-0"})(["display:grid;grid-gap:12px;grid-template-rows:[top] auto [middle] auto [end] auto;grid-template-columns:[title] 1fr [author] auto;","{grid-template-rows:[top] 24px [middle] minmax(36px,max-content) [end] 1fr;}"],(0,o.up)("sm")),f=t.ZP.div.withConfig({displayName:"PageHeader__HeaderImage",componentId:"sc-1e4osxu-1"})(["margin-top:8px;","{margin-top:16px;}","{margin-top:24px;}"],(0,o.up)("sm"),(0,o.up)("md")),v=t.ZP.div.withConfig({displayName:"PageHeader__TitleArea",componentId:"sc-1e4osxu-2"})(["grid-column:title;grid-row:middle;align-self:start;display:flex;align-items:baseline;min-width:0;"]),y=t.ZP.div.withConfig({displayName:"PageHeader__CtaArea",componentId:"sc-1e4osxu-3"})(["align-self:start;grid-column:author;grid-row:middle;","{align-self:end;grid-column:author;margin-top:0;}"],(0,o.up)("sm")),j=t.ZP.div.withConfig({displayName:"PageHeader__Description",componentId:"sc-1e4osxu-4"})(["grid-column:title;grid-column-end:artist;grid-row:end;"]),_=(0,t.ZP)(u).withConfig({displayName:"PageHeader__StyledBreadcrumbs",componentId:"sc-1e4osxu-5"})(["grid-row:top;grid-column:title;"]),b=t.ZP.div.withConfig({displayName:"PageHeader__Container",componentId:"sc-1e4osxu-6"})(["padding-bottom:12px;","{padding-bottom:16px;}","{padding-bottom:20px;}align-self:center;display:flex;flex-direction:column;","{order:2;}","{","{display:none;}","{order:2;}","{order:3;}","{order:1;}}"],(0,o.up)("sm"),(0,o.up)("md"),j,(0,o.z)("xs"),_,g,j,f),w=t.ZP.div.withConfig({displayName:"PageHeader__Nav",componentId:"sc-1e4osxu-7"})(["grid-column:title;grid-column-end:artist;grid-row:bottom;margin-top:16px;margin-bottom:4px;"]),C=t.ZP.div.withConfig({displayName:"PageHeader__Artist",componentId:"sc-1e4osxu-8"})(["white-space:nowrap;text-overflow:ellipsis;overflow:hidden;margin-left:8px;","{margin-top:0;}"],(0,o.up)("sm"))},69126:function(e,n,i){"use strict";i.d(n,{l:function(){return s},I:function(){return c}});var t=i(56648),o=i(34885),r=i(53746),l=i(90234),a=i(65410);function s(){var e=(0,r.useRouter)(),n=(0,t.ES)(),i=n.user,l=n.loading;return(0,o.useEffect)((function(){l||i||e.replace("/sign-in?next=".concat(encodeURIComponent(e.asPath)))}),[l,i,e])}function c(){var e=(0,r.useRouter)(),n=(0,l.Lk)(),i=(0,t.ES)(),s=i.user,c=i.loading;(0,o.useEffect)((function(){if(!c&&s)if(e.query.next)try{var i=new URL("".concat(a.OB.WEB_URL).concat(decodeURIComponent(String(e.query.next))));e.replace("".concat(i.pathname).concat(i.search))}catch(t){e.replace("/")}else"web"!==n?e.replace("/collections?isPlugin=true"):e.replace("/")}),[c,s,e,n])}},22581:function(e,n,i){"use strict";i.r(n),i.d(n,{__N_SSG:function(){return T},default:function(){return A}});var t=i(24438),o=i(66868),r=i.n(o),l=i(99602),a=i(39850),s=i(48692),c=i(64281),d=i(61585),u=i(32737),m=i(63949),p=i(55691),h=i(26847),x=i(85181),g=i(79254),f=i(56648),v=i(69126),y=i(27844),j=i(89545),_=i(36699),b=i(41566),w=i(34885),C=i(69833),P=i(92255),I=i(27697),N=i(55429),k=i(65410),S=i(47),Z=i(620),B=i(22319),z=i(54695),E=i(88349),T=!0;function A(){var e=(0,h.y2)(),n=e.teamsById,i=e.membershipData,t=(0,b.Z)().t,o=(0,f.ES)().loading,r=(0,d.GI)();return(0,v.l)(),(0,E.jsx)(u.Z,{flagBag:r,children:(0,E.jsxs)(l.Elements,{stripe:(0,Z.d2)(),options:{fonts:[{src:"url(".concat(k.OB.WEB_URL,"/fonts/gorditaregular-webfont.ttf)"),family:"gordita-web"}]},children:[(0,E.jsx)(a.f,{}),(0,E.jsx)("h2",{style:{marginBottom:40,fontSize:24},children:t("common:billing")}),o?(0,E.jsxs)(E.Fragment,{children:[(0,E.jsx)(m.Bw,{style:{width:300,height:100,marginBottom:60}}),(0,E.jsx)(m.Bw,{style:{width:"100%",height:50,margin:8}}),(0,E.jsx)(m.Bw,{style:{width:"100%",height:50,margin:8}}),(0,E.jsx)(m.Bw,{style:{width:"100%",height:50,margin:8}})]}):(0,E.jsxs)(E.Fragment,{children:[(0,E.jsx)(H,{}),i.filter((function(e){return e.joined})).map((function(e){var i=n[e.teamId];return i&&(0,Z.BZ)(i.subscriptionStatus)?(0,E.jsx)(H,{teamId:i.id},i.id):null}))]})]})})}function H(e){var n,i,o,l,a,u,m,v,P,I,k,B,T=e.teamId,A=(0,N.ZP)("/api/stripe/billing".concat(T?"?teamId=".concat(T):""),S.SK),H=A.data,U=A.revalidate,K=A.error,M=(0,N.g_)((function(e,n){return n&&!n.data?null:0!==e&&null!==n&&void 0!==n&&n.nextCursor?"/api/stripe/invoices?limit=3&cursor=".concat(null===n||void 0===n?void 0:n.nextCursor).concat(T?"&teamId=".concat(T):""):"/api/stripe/invoices?limit=3".concat(T?"&teamId=".concat(T):"")}),S.SK),$=M.data,G=M.size,L=M.setSize,J=M.error,X=(0,h.t7)(T),Q=(0,z.z)().track,V=(0,b.Z)().t,Y=(0,f.sl)(),ee=(0,p.A)(),ne=(0,w.useState)(!1),ie=ne[0],te=ne[1],oe=(0,g.p)(),re=(0,y.Z)(["CAN_EDIT_TEAM"],y.G,null===X||void 0===X?void 0:X.role),le=(0,d.xu)().flags,ae=function(){var e=(0,t.Z)(r().mark((function e(){return r().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return te(!0),e.prev=1,e.next=4,(0,C.rx)(T);case 4:Y({type:"FETCH_SUBSCRIPTION_REQUEST"}),U(),e.next=11;break;case 8:e.prev=8,e.t0=e.catch(1),oe({type:"SHOW_TOAST",payload:{type:"error",message:e.t0.message}});case 11:te(!1);case 12:case"end":return e.stop()}}),e,null,[[1,8]])})));return function(){return e.apply(this,arguments)}}();if(T&&!(0,Z.BZ)(null===X||void 0===X?void 0:X.subscriptionStatus))return null;if(K)return null;var se=null===H||void 0===H||null===(n=H.subscription)||void 0===n?void 0:n.items.data[0],ce=(null===se||void 0===se?void 0:se.price)&&(0,Z.nf)(se.price),de="monthly"===ce&&(null===le||void 0===le?void 0:le.annualSwitchExperiment);return(0,E.jsxs)(D,{children:[(0,E.jsx)(q,{children:T?null===X||void 0===X?void 0:X.name:"Personal"}),T&&re||!T?(0,E.jsxs)(E.Fragment,{children:[!(null!==H&&void 0!==H&&H.subscription)&&(0,E.jsxs)(E.Fragment,{children:[V("common:you-are-not-currently-subscribed-to-blush-pro"),(0,E.jsxs)(W,{children:[(0,E.jsx)(s.z,{size:"lg",onClick:function(){return ee({type:"subscribe",props:{selectedTeamId:T,onCheckoutCompleted:U}})},children:"Upgrade to Pro"}),(0,E.jsx)(s.z,{size:"lg",variant:"link",className:"ml-8",href:"/plans",children:V("common:view-plans")})]})]}),(null===H||void 0===H?void 0:H.subscription)&&se&&(0,E.jsxs)("div",{style:{lineHeight:"2em",margin:"8px 0"},children:["string"!==typeof H.subscription.latest_invoice&&"past_due"===H.subscription.status&&(null===(i=H.subscription.latest_invoice)||void 0===i?void 0:i.hosted_invoice_url)&&(0,E.jsx)(O,{type:"error",message:V("common:payment-due"),button:(0,E.jsx)(s.z,{href:H.subscription.latest_invoice.hosted_invoice_url,children:V("common:pay-invoice")})}),(0,E.jsx)(x.mz,{children:V("common:current-plan")}),(0,E.jsx)("strong",{children:"Blush Pro"}),(0,E.jsxs)("div",{children:[(0,Z.RK)("yearly"===ce?se.price.unit_amount:(0,Z.Fx)(se.price))," ","monthly"===ce?"per month":"quarterly"===ce?"every 3 months":"per year",(null!==(o=se.quantity)&&void 0!==o?o:1)>1&&" - ".concat(se.quantity," seats")]}),(null===(l=H.paymentMethod)||void 0===l?void 0:l.card)&&(0,E.jsx)(R,{planExpiresAt:H.subscription.cancel_at,planRenewsAt:H.subscription.cancel_at_period_end?null:null===(a=H.subscription)||void 0===a?void 0:a.current_period_end,last4:H.paymentMethod.card.last4,amountDue:(0,Z.RK)(null!==(u=null===(m=H.upcomingInvoice)||void 0===m?void 0:m.amount_due)&&void 0!==u?u:0),cardType:null===(v=c.w[H.paymentMethod.card.brand])||void 0===v?void 0:v.name}),null!==(P=H.subscription)&&void 0!==P&&P.cancel_at?(0,E.jsx)(W,{children:(0,E.jsx)(s.z,{size:"lg",disabled:ie,onClick:ae,children:V("common:resume-subscription")})}):(0,E.jsxs)(W,{children:[(0,E.jsxs)("div",{className:"flex flex-col items-center",children:[(0,E.jsx)(s.z,{size:"lg","data-testid":"change-plan-button",onClick:function(){var e;ee({type:"subscribe",props:{showProFeatures:!1,onCheckoutCompleted:function(){U(),oe({type:"SHOW_TOAST",payload:{type:"success",message:V("common:checkout-success-message")}})},selectedTeamId:T,initialSeats:null===X||void 0===X?void 0:X.numMembers,hideSeatSelection:!T,ignoreConfirmation:!0,initialFrequency:"month"===(null===(e=se.price.recurring)||void 0===e?void 0:e.interval)?"yearly":"monthly"}}),de&&Q("Clicked Switch To Annual",{from:"billing page"})},children:V(de?"common:switch-to-annual":"common:update-plan")}),de&&(0,E.jsx)("small",{style:{marginTop:8},children:"Save $96"})]}),(0,E.jsx)(s.z,{size:"lg",variant:"link",className:"ml-8",onClick:function(){return ee({type:"downgrade",props:{onDowngradeCompleted:U,teamId:T}})},children:"trialing"===H.subscription.status?V("common:cancel-trial"):V("common:cancel-plan")})]}),"trialing"===H.subscription.status&&(null===(I=H.subscription)||void 0===I?void 0:I.current_period_end)&&(0,E.jsx)("small",{children:(0,E.jsx)(_.Z,{i18nKey:"common:cancel-trial-text",values:{cancelPlanText:V("common:cancel-trial"),renewalDate:(0,Z.p6)(H.subscription.current_period_end)}})})]}),(null===H||void 0===H?void 0:H.paymentMethod)&&(0,E.jsxs)("div",{children:[(0,E.jsx)(x.mz,{children:V("common:payment-method")}),(0,E.jsx)(c.Z,{teamId:T,canRemoveCard:!0})]}),!J&&$&&Boolean(null===(k=$[0])||void 0===k?void 0:k.data.length)&&(0,E.jsxs)("div",{children:[(0,E.jsx)(x.mz,{children:V("common:billing-history")}),null===$||void 0===$?void 0:$.map((function(e){return e.data.map((function(e){return(0,E.jsxs)(F,{children:[(0,E.jsx)("div",{style:{fontWeight:"bold"},children:(0,Z.p6)(e.created)}),(0,E.jsx)("div",{style:{flexGrow:1},children:"Pro Plan"}),(0,E.jsx)("div",{children:(0,Z.RK)(e.total)}),e.pdf&&(0,E.jsx)("div",{children:(0,E.jsx)(s.z,{variant:"secondary",href:e.pdf,children:V("common:download-invoice")})})]},e.id)}))})),(null===(B=(0,j.last)($))||void 0===B?void 0:B.hasMore)&&(0,E.jsx)(s.z,{variant:"link",className:"mt-4",size:"inherit",onClick:function(){return L(G+1)},children:V("common:show-more")})]})]}):(0,E.jsxs)("div",{className:"my-2 leading-2",children:[(0,E.jsx)(x.mz,{children:V("common:current-plan")}),(0,E.jsx)("strong",{children:"Blush Pro"}),(0,E.jsx)("div",{children:V("common:minimal-billing-description")})]})]})}function R(e){var n=e.planRenewsAt,i=e.planExpiresAt,t=e.amountDue,o=e.cardType,r=e.last4;return(0,E.jsxs)("div",{children:[n&&t&&(0,E.jsx)(_.Z,{i18nKey:"common:next-charge-text",values:{amountDue:t,renewalDate:(0,Z.p6)(n),card:"".concat(null!==o&&void 0!==o?o:""," \u2022\u2022\u2022\u2022 ").concat(r)}}),i&&(0,E.jsx)(_.Z,{i18nKey:"common:subscription-end-text",values:{expirationDate:(0,Z.p6)(i)}})]})}var D=P.ZP.div.withConfig({displayName:"billing__BillingSections",componentId:"sc-tfjdqh-0"})(["display:flex;flex-direction:column;margin-bottom:56px;> div{margin:24px 0;}"]),q=P.ZP.h3.withConfig({displayName:"billing__SectionHeader",componentId:"sc-tfjdqh-1"})(["font-size:20px;font-weight:",";"],I.rS.fontWeights.bold),W=P.ZP.div.withConfig({displayName:"billing__ActionButtons",componentId:"sc-tfjdqh-2"})(["display:flex;margin:16px 0;"]),F=P.ZP.div.withConfig({displayName:"billing__Row",componentId:"sc-tfjdqh-3"})(["display:flex;flex-direction:row;align-items:center;padding:18px 0;border-bottom:1px solid ",";> div{margin:0 32px 0 0;}"],I.rS.colors.light),O=(0,P.ZP)(B.F).withConfig({displayName:"billing__PastDueError",componentId:"sc-tfjdqh-4"})(["width:auto;margin:12px 0;"])},26915:function(e,n,i){(window.__NEXT_P=window.__NEXT_P||[]).push(["/account/billing",function(){return i(22581)}])}},function(e){var n=function(n){return e(e.s=n)};e.O(0,[9774,2888,179],(function(){return n(66410),n(26915)}));var i=e.O();_N_E=i}]);